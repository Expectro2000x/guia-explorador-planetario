import{r as s,b as F,u as R,j as e,a as h}from"./index-Bs6gLj6-.js";const z=()=>{const[p,x]=s.useState(null),[g,f]=s.useState(null),[j,b]=s.useState(null),[v,N]=s.useState(""),[c,C]=s.useState(""),[S,k]=s.useState(""),[l,y]=s.useState(!1),[d,n]=s.useState(""),[u,o]=s.useState(""),{login:E}=F(),i=R();s.useEffect(()=>{localStorage.getItem("auth")&&i("/especies")},[i]);const w=async r=>{if(r.preventDefault(),n(""),o(""),c!==S){n("Las contraseñas no coinciden.");return}try{const a=await h.post("http://localhost:4000/registro",{nombre:p,apellido:g,nickname:j,email:v,contraseña:c});a.status===201?(E(a.data.user,a.data.accessToken,a.data.refreshToken),i("/especies")):n(a.data.error||"Registro fallido")}catch(a){if(console.error("Hubo un error durante el registro:",a),h.isAxiosError(a)){const t=a;if(t.response){const m=t.response.data;m.error?n(m.error):o("Error del servidor durante el registro"),console.error("Error del servidor:",t.response.data)}else t.request?(console.error("Error en la solicitud:",t.message),o("Sin respuesta del servidor")):(console.error("Fallo en el configuracion de la solicitud:",t.message),o("Hubo un fallo al configurar la solicitud"))}else o("Un error general ha ocurrido")}};return e.jsx("div",{className:"d-flex vh-100 justify-content-center align-items-center",children:e.jsx("div",{className:"w-50 white-bg rounded p-3",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("h2",{children:"Registrar Usuario"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"nombre",children:"Nombre"}),e.jsx("input",{type:"text",placeholder:"Introduzca su nombre",className:"form-control",id:"nombre",onChange:r=>x(r.target.value),autoComplete:"given-name"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"apellido",children:"Apellido"}),e.jsx("input",{type:"text",placeholder:"Introduzca su apellido",className:"form-control",id:"apellido",onChange:r=>f(r.target.value),autoComplete:"family-name"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"nickname",children:"Nickname"}),e.jsx("input",{type:"text",placeholder:"Introduzca su nickname",className:"form-control",id:"nickname",onChange:r=>b(r.target.value)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"email",children:"Correo"}),e.jsx("input",{type:"text",placeholder:"Introduzca su correo",className:"form-control",id:"email",onChange:r=>N(r.target.value),autoComplete:"email"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsx("input",{type:l?"text":"password",placeholder:"Introduzca su contraseña",className:"form-control",id:"password",onChange:r=>C(r.target.value)})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"verificarPassword",children:"Verifique su contraseña"}),e.jsx("input",{type:l?"text":"password",placeholder:"Confirme la contraseña",className:"form-control",id:"verificarPassword",onChange:r=>k(r.target.value)})]}),e.jsxs("label",{children:[" ","Mostrar Contraseña",e.jsx("input",{type:"checkbox",name:"checkbox",checked:l,onChange:()=>y(!l)})]}),e.jsx("button",{className:"btn",children:"Registrarse"}),d&&e.jsx("p",{className:"mensaje-error",children:d})," ",u&&e.jsx("p",{className:"mensaje-error",children:u})]})})})};export{z as default};
